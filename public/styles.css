:root {
  --unit: 18rem;
  --u1: 0.25rem;
  --u2: 0.5rem;
  --sup: rgba(255, 255, 0, 0.5);
  --sub: rgba(255, 0, 0, 0.25);
  --med: rgba(128, 128, 128, 0.125);
}

html,
body {
  height: 100%;
}

main {
  /* 
  RESET */
  &,
  * {
    box-sizing: border-box;
  }
  &,
  h2,
  h3,
  p,
  form {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: monospace;
    font-size: 1rem;
  }

  /* 
  STRUCTURE */
  &,
  section,
  article,
  aside,
  fieldset {
    padding: var(--u2);
  }
  section,
  aside,
  h2,
  p,
  ul,
  ol,
  form,
  table {
    margin-bottom: var(--u2);
  }
  .resize,
  .scroll {
    will-change: scroll-position;
  }
  .resize {
    resize: both;
    overflow: hidden;
    overflow-y: auto;
  }
  .scroll {
    overflow: hidden;
    overflow-y: auto;
    max-height: 12rem;
  }

  & {
    /*user-select: none;*/
    /*position: absolute;*/
    position: relative;
    z-index: 2;
    margin: var(--u2);
    width: 16rem;
    max-width: var(--unit);
  }
  #tools {
    position: absolute;
  }

  aside {
    position: absolute;
    left: 100%;
    background: var(--med);
  }

  /* counter */
  counter-reset: section;
  section,
  article {
    &:after {
      /* fix overflow height */
      counter-increment: section;
      content: '::' counter(section);
      display: block;
      clear: both;
      /* and troubleshoot toSvg */
      font-size: 0.5rem;
      color: #808080;
    }
  }

  /*
  ELEMENTS */
  #nest {
    font-size: 1.5em;
    margin: 1rem 0 var(--u2);
    background-color: rgba(255, 255, 128, 0.5);
    div,
    span,
    section {
      width: 50%;
      float: left;
      text-align: center;
      background-color: rgba(128, 128, 128, 0.25);
    }
  }

  /* form */
  input,
  select {
    border: 0.125rem solid transparent;
    border-radius: 0;
  }
  input[type='text'],
  input[type='button'],
  input[type='reset'],
  button,
  select {
    appearance: none;
    border-color: var(--med);
  }

  table {
    border-collapse: collapse;
    text-align: left;
    tr:nth-child(odd) {
      background-color: var(--med);
    }
    td,
    th {
      padding: var(--u1);
    }
  }

  ul {
    padding-left: 1.75em;
  }

  table tr,
  li,
  summary {
    &:hover,
    &:focus {
      background-color: var(--sub);
    }
  }

  main {
    line-height: 1;
  }

  /*
  STYLE */

  /* accents */
  h2,
  details {
    border-top: var(--u1) solid var(--sup);
    font-style: normal;
    font-weight: normal;
  }
  .sup,
  h2 span,
  summary span {
    background-color: var(--sup);
  }
  .sub {
    background-color: var(--sub);
  }
}

/*
LAYOUT */
.w25,
.w33,
.w50,
.w66,
.w75 {
  float: left;
}
.w25 {
  width: 25%;
}
.w33 {
  width: 33.3%;
}
.w50 {
  width: 50%;
}
.w66 {
  width: 66.6%;
}
.w75 {
  width: 75%;
}
.w100 {
  width: 100%;
}
img {
  width: 100%;
  height: auto;
}

/* containers */
.yt iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: 0;
}
.yt {
  position: relative;
  width: 100%;
  padding-bottom: 56.25%;
}
model-viewer {
  width: 100%;
  height: 6em;
  position: relative;
  contain: strict;
}

/* 
EFFECTS, ANIMATION */

.tilt {
  transform: rotate(-15deg);
}

.hinge {
  position: relative;
  /*animation: hinge 6s linear infinite alternate;*/
}
@keyframes hinge {
  25% {
    z-index: 0;
    transform: rotate(0deg);
  }

  50% {
    z-index: 99;
    transform: rotate(-15deg);
  }

  75% {
    z-index: -3;
    transform: rotate(0deg);
  }

  100% {
    z-index: 0;
  }
}

.cycle {
  animation: cycle 3s steps(1, start) infinite;
}
@keyframes cycle {
  33% {
    background-color: rgba(255, 0, 0, 0.5);
  }
  66% {
    background-color: rgba(0, 255, 0, 0.5);
  }
  100% {
    background-color: rgba(0, 0, 255, 0.5);
  }
}

.lil-gui.root {
  .title {
    overflow: hidden;
  }
  div:before,
  div:after {
    /* CDN serves garbage after throttling (arrow) */
    content: '' !important;
  }
}

/* test: reflow, update */
.mp-unstyle {
  .hinge {
    animation: hinge 12s linear infinite;
  }
  .march mp {
    animation: snake 12s linear infinite alternate;
  }
  span.mp-poster {
    box-shadow: inset 0 -0.125em 0 0 var(--sub);
  }
}

:focus,
:active,
.active {
  box-shadow: inset 0 0 0.125em 0.125em red;
  animation: active 0.5s linear infinite alternate;
}
@keyframes active {
  to {
    box-shadow: inset 0 0 0em 0.125em cyan;
  }
}

/**/

.w33:hover {
  scale: 2;
  transition: 3s scale;
}

#live img.w50:hover {
  width: 100%;
  transition: width 2s;
}

.gpuForce {
  transform: translate3d(0, 0, 0);
}

.stage {
  position: relative;
  overflow: visible;
}

.march {
  animation: snake 12s linear infinite alternate;
  & mp {
    animation: none;
  }

  &,
  mp {
    background-color: rgba(255, 0, 0, 0.5);
    position: relative;
    border-radius: 0.25em;
    box-shadow: rgba(255, 255, 255, 0.75) 0em 0.125em 0.25em 0.125em inset, rgba(0, 0, 0, 0.25) 0px -0.125em 0.125em 0.125em inset;
    pointer-events: none;

    mp.zebra {
      background-color: rgba(0, 0, 255, 0.5);
    }

    &,
    & :after,
    & :before {
      display: block;
      width: 1em;
      height: 1em;
      text-align: center;
    }

    :after,
    :before {
      content: '';
      position: absolute;
      font-size: 0.5em;
      animation-delay: 0.25s;
      border-radius: 0.5em 0.5em 0.25em 0.25em;
    }
    :after {
      background-color: rgba(255, 255, 0, 0.25);
      top: 2em;
      left: -0.5em;
    }
    :before {
      background-color: rgba(0, 255, 128, 0.25);
      width: 2em;
    }
  }

  mp,
  mp mp {
    font-size: 1.25em;
    bottom: 0.125em;
  }

  mp mp,
  mp mp mp mp {
    transform: translate(0.5em, 0);
  }

  /* wiggle */
  mp {
    animation-delay: 0.125s !important;
    z-index: 1;
    mp {
      animation-delay: 0.25s !important;
      z-index: 1;
      mp {
        animation-delay: 0.5s !important;
        z-index: 2;
        mp {
          animation-delay: 0.75s !important;
          z-index: 3;
        }
      }
    }
  }
}

@keyframes snake {
  0%,
  20%,
  40%,
  60%,
  80%,
  100% {
    bottom: 0.5em;
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    bottom: -0.25em;
  }

  50% {
    zoom: 1.05;
  }

  50% {
    left: 0.5em;
    rotate: 15deg;
  }
  100% {
    left: -0.25em;
    rotate: -7.5deg;
  }
}
